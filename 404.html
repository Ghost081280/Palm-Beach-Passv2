<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palm Beach Pass</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #FAF3E3, #FFFFFF);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
        }
        .logo { font-size: 4rem; margin-bottom: 1rem; }
        .title { font-size: 1.5rem; color: #2D5016; margin-bottom: 1rem; }
        .message { color: #666; margin-bottom: 2rem; }
        .spinner {
            width: 40px; height: 40px;
            border: 4px solid rgba(45,80,22,0.1);
            border-top: 4px solid #2D5016;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 2rem;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .btn { 
            background: #2D5016; color: white; padding: 1rem 2rem; 
            border: none; border-radius: 25px; cursor: pointer; 
            margin: 0.5rem; font-size: 1rem; text-decoration: none;
            display: inline-block;
        }
        .debug { 
            background: rgba(0,0,0,0.8); color: white; padding: 1rem; 
            border-radius: 10px; font-size: 0.8rem; max-width: 90%; 
            margin-top: 2rem; text-align: left; white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="logo">üå¥</div>
    <h1 class="title">Palm Beach Pass</h1>
    <p class="message">Redirecting to the right version...</p>
    <div class="spinner" id="spinner"></div>
    
    <div style="margin-top: 2rem;">
        <a href="./index.html" class="btn">üñ•Ô∏è Desktop Version</a>
        <a href="./mobile-purchase.html" class="btn">üì± Mobile Version</a>
    </div>
    
    <div class="debug" id="debug"></div>

    <script>
        // SUPER SIMPLE MOBILE DETECTION AND REDIRECT
        (function() {
            const userAgent = navigator.userAgent;
            const isMobile = /iPhone|iPad|iPod|Android|BlackBerry|Opera Mini|IEMobile|Mobile/i.test(userAgent);
            const isSmallScreen = window.innerWidth < 768;
            const isTablet = /iPad/i.test(userAgent) && window.innerWidth > 768;
            
            const debugInfo = `
URL: ${window.location.href}
User Agent: ${userAgent}
Screen: ${window.innerWidth}x${window.innerHeight}
Is Mobile UA: ${isMobile}
Is Small Screen: ${isSmallScreen}
Is Tablet: ${isTablet}
Should Redirect: ${(isMobile || isSmallScreen) && !isTablet}
            `;
            
            document.getElementById('debug').textContent = debugInfo;
            console.log('404 Debug Info:', debugInfo);
            
            // Determine redirect
            let redirectTo = './index.html'; // Default to desktop
            
            // Mobile redirect logic
            if ((isMobile || isSmallScreen) && !isTablet) {
                console.log('Mobile device detected, checking user state...');
                
                const hasAccount = localStorage.getItem('isLoggedIn') === 'true' || localStorage.getItem('userPasses');
                
                if (hasAccount) {
                    redirectTo = './mobile.html';
                    console.log('User has account -> mobile app');
                } else {
                    redirectTo = './mobile-purchase.html';
                    console.log('New user -> mobile purchase');
                }
            } else {
                console.log('Desktop/Tablet -> index');
            }
            
            console.log('Redirecting to:', redirectTo);
            
            // Update message
            document.querySelector('.message').textContent = `Redirecting to ${redirectTo}...`;
            
            // Redirect after 2 seconds
            setTimeout(() => {
                window.location.href = redirectTo;
            }, 2000);
            
        })();
    </script>
</body>
</html>
